// Module included in the following assemblies:
//
// * hardware_enablement/dpu-hardware-offload.adoc

:_content-type: PROCEDURE
[id="adding-additional-hosts-to-cluster_{context}"]
= Adding additional hosts to an existing cluster

Add worker nodes to the existing infrastructure cluster by using this procedure. The following procedure provides examples of using `jq`. See the link:https://stedolan.github.io/jq/manual/[jq Manual] for detailed information about using `jq`. 

.Prerequisites

* You have installed `jq`.

.Procedure

. Set key global environment variables.
+
[source,terminal]
----
AI_URL=http://<host IP>:<PORT>
CLUSTER_ID=<CLUSTER UUID>
----

. Optional: Verify the status of the cluster. The cluster must be in a `installed` status.
+
[source,terminal]
----
curl --silent "$AI_URL/api/assisted-install/v2/clusters/$CLUSTER_ID" | jq '.status'
----
+
.Expected output
+
[source,terminal]
----
"installed"
----

. Change cluster status to `adding-hosts`.
+
[source,terminal]
----
 curl -X POST --silent "$AI_URL/api/assisted-install/v2/clusters/$CLUSTER_ID/actions/allow-add-workers" | jq '.'
----

. Optional: Verify the Cluster status has changed.
+
[source,terminal]
----
curl --silent "$AI_URL/api/assisted-install/v2/clusters/$CLUSTER_ID" | jq '.status'
----
+
.Expected output
+
[source,terminal]
----
"adding-hosts"
----

. Download the new ISO

.. Get the InfraEnv id.
+
[source,terminal]
----
INFRAENV=$(curl --silent "$AI_URL/api/assisted-install/v2/infra-envs?cluster_id=$CLUSTER_ID" | jq '.[] .id' | cut -d'"' -f2)
----

.. Get the download URL.
+
[source,terminal]
----
curl --silent "$AI_URL/api/assisted-install/v2/infra-envs/$INFRAENV/downloads/image-url" | jq '.url'
----
+
.Expected output
+
[source,terminal]
----
"http://10.19.128.100:8888/images/4e70ad24-7c01-40ae-8196-d52b0b6bbbe1?arch=arm64&type=minimal-iso&version=4.10"
----

.. Download the ISO and use it to boot the new hosts by using PXE or virtual media.
