// Module included in the following assemblies:
//
// * hardware_enablement/dpu-hardware-offload.adoc

:_content-type: PROCEDURE
[id="pxe-boot-additional-hosts-with-dscovery-iso_{context}"] 
= PXE boot additional hosts with the discovery ISO 

Use PXE to boot the DPU nodes in the cluster using the discovery ISO. There are two possible ways to do this:

. Interrupt the boot sequence and enter the BIOS settings 
. Configure DHCP to store and serve the boot information

.Procedure

. Interrupt the boot sequence and enter the BIOS settings.

.. Reboot each host in the cluster in turn by intercepting the boot sequence (often by hitting the F12 key on an attached keyboard) entering the BIOS settings.

.. Change the boot order to boot from *On-board Network Device (PXE)* first.

.. Input the location of the discovery ISO.

.. Save and exit the BIOS settings. The server will boot with the discovery image.

.. Monitor the progress of the installation of the discovery ISO on the console of the machine.

.. Ensure you set the boot order back to *Boot from disk* before starting the installation. 

. Configure DHCP to store and serve the boot information. 

.. Edit `/etc/dhcp/dhcpd.conf` and append an entry for the PXE clients, for example: 
+
[source,yaml]
----
  class "pxeclients" {
        match if substring (option vendor-class-identifier, 0, 9) = "PXEClient";
        next-server 172.31.100.1; <1>
        always-broadcast on;

        filename "/BOOTAA64.EFI"; <2>
----
+
<1> Specify the IP address of the TFTP server.
<2> Specify the EFI program file. 

.. Restart the DHCP server 
+
[source,terminal]
----
$ systemctl restart dhcpd.service
----

.. Change the boot order to boot from PXE using command line:
+
[source,terminal]
----
$ ipmitool -H {{ BMC_ADDRESS }} -U {{ BMC_USER }} -P {{ BMC_PASSWORD }}  -I lanplus chassis bootdev pxe
----

.. Inititiate a power reset: 
+
[source,terminal]
----
$ ipmitool -H {{ BMC_ADDRESS }} -U {{ BMC_USER }} -P {{ BMC_PASSWORD }}  -I lanplus power reset
----

.. After booting from ISO revert the boot order back to disk:
+
[source,terminal]
----
$ ipmitool -H {{ BMC_ADDRESS }} -U {{ BMC_USER }} -P {{ BMC_PASSWORD }}  -I lanplus chassis bootdev disk
----