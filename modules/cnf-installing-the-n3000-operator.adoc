// CNF-1498 Validate and Document Intel SRO and SRIOV FEC Operator
// Module included in the following assemblies:
//
// *cnf-optimize-data-performance-n3000.adoc

[id="installing-the-openness-operator-intel-fpga-pac-n3000-operator_{context}"]
= Installing the OpenNESS Operator for Intel® FPGA PAC N3000

The OpenNESS Operator for Intel® FPGA PAC N3000 orchestrates and manages the resources/devices exposed by the Intel® FPGA PAC N3000 card within the OpenShift cluster.

For vRAN use-cases it is expected that the operator is used alongside the OpenNESS Operator for Intel® Wireless FEC Accelerator.

As a cluster administrator, you can install the OpenNESS Operator for Intel® FPGA PAC N3000 using the {product-title} CLI or the web console.

[id="install-operator-cli_{context}"]
== Installing the Operator using the CLI

As a cluster administrator, you can install the Operator using the CLI.

.Prerequisites

* A cluster installed on bare-metal hardware.
* Install the OpenShift CLI (`oc`).
* Log in as a user with `cluster-admin` privileges.

.Procedure

. Create a namespace for the N3000 Operator by completing the following actions:

.. Create the following Namespace Custom Resource (CR) that defines the `vran-acceleration-operators` namespace,
and then save the YAML in the `n3000-namespace.yaml` file:
+
[source,yaml]
----
apiVersion: v1
kind: Namespace
metadata:
    name: vran-acceleration-operators
    labels:
        openshift.io/cluster-monitoring: "true"
----

.. Create the namespace by running the following command:
+
[source,terminal]
----
$ oc create -f n3000-namespace.yaml
----

. Install the N3000 Operator in the namespace you created in the previous step by creating the following objects:

.. Create the following `OperatorGroup` CR and save the YAML in the `n3000-operatorgroup.yaml` file:
+
[source,yaml]
----
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
    name: n3000-operators
    namespace: vran-acceleration-operators
spec:
    targetNamespaces:
    - vran-acceleration-operators
----

.. Create the `OperatorGroup` CR by running the following command:
+
[source,terminal]
----
$ oc create -f n3000-operatorgroup.yaml
----


.. Run the following command to get the `channel` value required for the next step.
+
[source,terminal]
----
$ oc get packagemanifest n3000-operator -n openshift-marketplace -o jsonpath='{.status.defaultChannel}'
----
+
.Example output
[source,terminal]
----
stable
----

.. Create the following Subscription CR and save the YAML in the `n3000-sub.yaml` file:
+
.Example Subscription
[source,yaml]
----
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
    name: n3000-subscription
    namespace: vran-acceleration-operators
spec:
    channel: "<channel>"        <1>
    name: n3000
    source: certified-operators <2>
    sourceNamespace: openshift-marketplace
----
<1> Specify the value for channel from that obtained in the previous step for the `.status.defaultChannel` parameter.
<2> You must specify the `certified-operators` value.

.. Create the Subscription object by running the following command:
+
[source,terminal]
----
$ oc create -f n3000-sub.yaml
----

.. Change to the `vran-acceleration-operators` project:
+
[source,terminal]
----
$ oc project vran-acceleration-operators

----

[id="install-n3000operator-web-console_{context}"]
== Installing the OpenNESS Operator for Intel® FPGA PAC N3000 Operator using the web console

As a cluster administrator, you can install the OpenNESS Operator for Intel® FPGA PAC N3000 Operator using the web console.

[NOTE]
====
You must create the `Namespace` CR and `OperatorGroup` CR as mentioned in the previous section.
====

.Procedure

. Install the OpenNESS Operator for Intel® FPGA PAC N3000 Operator using the {product-title} web console:

.. In the {product-title} web console, click *Operators* -> *OperatorHub*.

.. Choose *Intel® FPGA PAC N3000 Operator* from the list of available Operators, and then click *Install*.

.. On the *Install Operator* page, select *All namespaces on the cluster*. Then, click *Install*.

. Optional: Verify that the n3000-operator is installed successfully:

.. Switch to the *Operators* -> *Installed Operators* page.

.. Ensure that *Intel® FPGA PAC N3000 Operator* is listed in the *vran-acceleration-operators* project with a *Status* of *InstallSucceeded*.
+
[NOTE]
====
During installation an Operator might display a *Failed* status. If the installation later succeeds with an *InstallSucceeded* message, you can ignore the *Failed* message.
====
+
If the Operator does not appear as installed, to troubleshoot further:
+
* Go to the *Operators* -> *Installed Operators* page and inspect the *Operator Subscriptions* and *Install Plans* tabs for any failure or errors
under *Status*.
* Go to the *Workloads* -> *Pods* page and check the logs for pods in the `vran-acceleration-operators` project.
