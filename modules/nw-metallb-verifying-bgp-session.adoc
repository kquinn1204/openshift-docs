:_mod-docs-content-type: PROCEDURE
[id="nw-metallb-verifying-bgp-session_{context}"]
= Verifying BGP session establishment

[role="_abstract"]
After configuring MetalLB for BGP mode, you can verify that BGP sessions are established and routes are being advertised by examining the FRRNodeState custom resource. This helps troubleshoot BGP connectivity and confirm proper route advertisement.

.Prerequisites

* You have an {product-title} cluster with the MetalLB Operator installed.
* You have configured MetalLB for BGP mode with:
** An IPAddressPool
** A BGPPeer configuration
** A BGPAdvertisement
* You have deployed at least one LoadBalancer service.

.Procedure

. Check FRRNodeState to see the BGP configuration on each node:
+
[source,terminal]
----
$ oc get frrnodestate -n metallb-system
----
+
The example output lists the FRRNodeState resources for each node where the MetalLB speaker is running.
+
[source,terminal]
----
NAME                 AGE
worker0.example.com  5m
----

. View the detailed BGP configuration and running state:
+
[source,terminal]
----
$ oc get frrnodestate worker0.example.com -n metallb-system -o yaml
----
+
The `status.runningConfig` field shows the FRR BGP configuration including configured BGP neighbors, route advertisements, and prefix lists.

. Verify routes are being advertised by checking the FRRNodeState:
+
[source,terminal]
----
$ oc get frrnodestate <node-name> -n metallb-system -o jsonpath='{.status.runningConfig}' | grep "network"
----
+
The output should include the network prefixes being advertised by BGP. For example:
+
[source,terminal]
----
 address-family ipv4 unicast
  network 192.168.122.210/32
----
+
This confirms that the service IP is being advertised via BGP.
