// Module included in the following assemblies:
//CC-3 (alongside 4.10 dev preview)
// * hardware_enablement/dpu-hardware-offload.adoc


:_content-type: PROCEDURE
[id="installing-the-dpu-operator_{context}"]
= Installing the DPU Network Operator

The DPU Network Operator on the infrastructure cluster side is responsible for the life-cycle management of the `ovn-kube` components and the necessary host network initialization on DPU cards.

As a cluster administrator, you can install the DPU network Operator using the {product-title} CLI or the web console.

.Prerequisites

* An infrastructure cluster composed of `x86` control plane and ARM worker nodes are up and running.
* An tenant cluster composed of `x86` control plane nodes.
* DPU cards installed on the worker nodes of the infrastructure cluster where hardware offloading need to be enabled.
* Pods in the infrastructure cluster can reach the API server of the tenant cluster
* Network configuration:
  - The infrastructure cluster and the tenant cluster share the same VLAN as the API network.
  - The two clusters shall use different VIPs as the cluster API VIP.
  - The DHCP server needs to be configured to be able to assign IP addresses to hosts from both clusters from the same subnet.
  - The DNS server shall be able to resolve the URI to the API URL for both the clusters.

[id="install-dpu-operator-web-console_{context}"]
== Installing the DPU Network Operator using the web console

As a cluster administrator, you can install the DPU Network Operator using the web console.


.Procedure

. Install the DPU Network Operator using the {product-title} web console (on the infrastructure cluster):

.. In the {product-title} web console, click *Operators* -> *OperatorHub*.

.. Choose *DPU Network Operator* from the list of available Operators, and then click *Install*.

.. On the *Install Operator* page, the only installation mode supported is *All namespaces on the cluster*. Review settings and click *Install*.

. Optional: Verify that the **DPU Network Operator** installed successfully:

.. Switch to the *Operators* -> *Installed Operators* page.

.. Ensure that *DPU Network Operator* is listed in the *openshift-operators* project with a *Status* of *InstallSucceeded*.
+
[NOTE]
====
During installation an Operator might display a *Failed* status. If the installation later succeeds with an *InstallSucceeded* message, you can ignore the *Failed* message.
====
+
If the Operator does not appear as installed, to troubleshoot further:
+
* Go to the *Operators* -> *Installed Operators* page and inspect the *Operator Subscriptions* and *Install Plans* tabs for any failure or errors
under *Status*.
* Go to the *Workloads* -> *Pods* page and check the logs for the `dpu-network-operator-controller-manager` pod.

[id="install-dpu-operator-cli_{context}"]
== Installing the Operator using the CLI

As a cluster administrator, you can install the Operator using the CLI.

.Prerequisites

* Install the OpenShift CLI (`oc`).
* Log in to infrastructure cluster as a user with `cluster-admin` privileges.

.Procedure

. Create the following Subscription CR and save the YAML in the `dpu-sub.yaml` file:
+
.Example Subscription
[source,yaml]
----
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: openshift-dpu-operator-subscription
  namespace: openshift-operators
spec:
  channel: "stable"
  name: dpu-network-operator
  source: redhat-operators <1>
  sourceNamespace: openshift-marketplace
----
+
<1> You must specify the `redhat-operators` value.

. Create the Subscription object by running the following command:
+
[source,terminal]
----
$ oc create -f dpu-sub.yaml
----

. Change to the `openshift-operators` project:
+
[source,terminal]
----
$ oc project openshift-operators
----

. Verify the DPU Network Operator is running:
+
[source,terminal]
----
$ oc get pods
----
+
.Example output
+
[source,terminal]
----
NAME                                                      READY   STATUS    RESTARTS   AGE
dpu-network-operator-controller-manager-cc9ccc4bd-9vqcg   2/2     Running   0          62s
----