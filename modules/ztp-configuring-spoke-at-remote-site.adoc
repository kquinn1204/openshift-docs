// Module included in the following assemblies:
//
// * scalability_and_performance/ztp-factory-install-clusters.adoc
:_content-type: PROCEDURE
[id="configuring-edge-cluster-at-remote-location_{context}"]
= Configuring the edge cluster at the remote location

Perform the following steps at the remote location.

[NOTE]
====
All the commands need `root` access. You can either log in as the `root` user and proceed with the process or add `sudo` before every command.
====

.Prerequisites

* `kubeadmin` password as supplied by vendor
* URL of the custom user interface

.Procedure

. Unbox and power on the cluster.

. Log in at command line to `master-0` of the cluster.

. Configure DNS on `master-0` of the hub cluster.

.. Edit `resolv.conf` on `master-0` and add the IP address of `master-0`.
+
[source,terminal]
----
$ vi /etc/resolv.conf
----

.. Add the line.
+
[source,terminal]
----
nameserver 192.168.7.10
----

. Configure a static IP on the connected laptop:

.. Determine the name of the laptop's network interface card (NIC) as follows.
+
[source,terminal]
----
$ ip addr
----
+
[NOTE]
====
Look for the NIC name starting with the letter `e`.
====

.. Edit the NIC's network configuration.
+
[source,terminal]
----
$ vi /etc/sysconfig/network-scripts/ifcfg-eth0
----
+
[NOTE]
====
Here `eth0` is the network card name, and it can be different for different computers.
====

.. Add or modify the configuration below:
+
[source,terminal]
----
BOOTPROTO=static
IPADDR=192.168.7.21
NETMASK=255.255.255.0
GATEWAY=192.168.0.1
DNS1=8.8.8.8
DNS2=8.8.4.4
----
+
[NOTE]
====
Any IP in the range `192.168.7.20 - 192.168.7.150` can be used.
====

. Open a browser and log in to the edge cluster configuration user interface at the following URL with the supplied `kubeadmin` `username` and `password`:
+
[source,terminal]
----
$ https:://edge-cluster-setup.foobar-edge-cluster.domain.com
----
+
[NOTE]
====
This `kubeadmin` username and password was created at the factory and should have been supplied to you. There is only one user created intitially.
====

. Click **Continue**.

. The screens that follow guide you through the initial setup.

.. In the first two screens create a new user account by entering a `username` and `password` when prompted.
+
[NOTE]
====
This new user account is granted `cluster-admin` privileges and should be used instead of the factory created `kubeadmin` account.
====

.. In the **API** screen assign the IP address that will be used for API traffic. A default value is assigned but you are free to update this.

.. In the **Ingress** screen assign the IP address that will be used for new routes and traffic managed by the ingress controller. A default value is assigned but you are free to update this.

.. Optional: Under Domain create unique URLs for the setup and console URLs for your edge cluster.

.. Click **Download** in the **SSH** screen and download the edge cluster private SSH key.
+
[NOTE]
====
You need this to access the nodes of the edge cluster.
====

.. Click **Finish setup**.
+
Once complete the screen switches to:
+
.Edge cluster setup
image::ztp-edge-cluster-setup1.png[Edge cluster setup]

.. Selecting **OpenShift console** brings you direct to the web console.

.. Under **Settings** you have the option to change the values of the **API address**, **Ingress address** and the previously configured **Domain**.
+
[NOTE]
====
At this stage you will not be prompted for a username and password as you are already logged in as ``kubeadmin``.
====

.. Click **Log out** in the top right hand corner.

.Verification and final setup

. Log in to the cluster again.

. Select the newly created identity provider `ztpfw-htpassd-idp`.

. In the cluster log in screen enter the `username` and `password` created in step 7a.
